# Простенькая отправлялка - принималка пушей firebase с авторизацией

Написано было за пару дней, что называется "для себя". Никаких тестов не проводилось, возможны глюки. Под маленькие экраны не адаптировано.

## Установка

- В консоле Firebase создать проект.
- Добавить веб-приложение в проект и скопировать получившийся конфиг следующего вида в файл `src/firebaseConfig.ts`.

```js
const firebaseConfig = {
  apiKey: 'xxxxx',
  authDomain: 'xxxxx',
  databaseURL: 'xxxxx',
  projectId: 'xxxxx',
  storageBucket: 'xxxxx',
  messagingSenderId: 'xxxxx',
  appId: 'xxxxx',
  measurementId: 'xxxxx',
};
```

- Этот же фрагмент внести в файл `public/firebase-messaging-sw.js`.
- Со следующей вкладки "Cloud Messaging" скопироваить vapidKey и добавить его в `src/firebaseConfig.ts`.
- На вкладке Service accounts сгенерировать приватный ключ, скачать его и записать в файл `serviceAccountKey.json` в `src`.
- Открыть доступ в Firestore. Что то типа этого:

```
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read: if true;
      allow write: if request.auth != null
    }
  }
}
```

- Дальше обычный запуск приложения.

## Как пользаваться

- Запустить.
- Авторизоваться под учетной записью Google или по емейлу/паролю. Если регистрация по емейлу, то подождать пока не придет письмо со ссылкой для подтверждения и кликнуть по ней.
- Разрешить браузеру принимать оповещения.
- Откроется страница со списком зарегистрированных пользователей. Можно отправить сообщение выбранным чекбоксами посетителям. Можно и себе, оно долно появиться в нижней таблице.

По соображениям безопасности нельзя, конечно, загружать приватные ключи в браузеры посетителей, но это сделано только себя для тестов. А другому пуши из браузера не отправишь(не считая APIKey, что почти то же самое)
